# 扩展词库

现在，你可以给落格输入法加载“细胞词库”了。你可以从 iCloud Drive 导入扩展词库编码表到 落格输入法 X，并把它们加载到落格输入法 X 的键盘中。

落格输入法 X 最大支持 100 万条词条总量，你可以导入多个扩展词库，但总量不应该大于 100 万，因为太大的词库会导致键盘性能有所降低。另外，单个词库也不应该大于 60 万词条，否则无法导入。由于词库是在设备中实时编译的，所以导入的速度可能会因设备而不同，请耐心等待。

## 行为

点击右上角加号即可从 iCloud Drive 导入扩展词库编码表，导入后点击之即可将编码编译并加载到扩展词库中。如果需要取消，则左划对应的扩展词库并点击删除；如果要更新对应的扩展词库，则重复导入即可。

导入的扩展词库编码表可以再次导出。

## 编码结构

扩展词库的编码表格式与 码表 格式基本相同，大概类似下面的样子：

```text
 经济核算    jing'ji'he'suan

 经济合同    jing'ji'he'tong

 紧急会议    jin'ji'hui'yi

 经济合作    jing'ji'he'zuo

 经济成分    jing'ji'cheng'fen

 拒绝承认    ju'jue'cheng'ren

 经济结构    jing'ji'jie'gou

 经济价值    jing'ji'jia'zhi

 经济加值    jing'ji'jia'zhi
```

注意字和拼音之间用 tab 分割，拼音用英文的撇分割（'）。

如果你这样导入，那么遇到重码，对于同一个扩展词库来说，则取编码中“靠上”位置的词在前。对于不同扩展词库来说，这个排序是一个迷，所以请尽量不要导入内容高度类似的扩展词库。

特别地，如果你想要精确控制每个重码的排序（在同一扩展词库范围内），你可以在拼音后再追加 tab，然后输入数字，数字越小，候选就越靠前，比如 0 就是最靠前（默认的位置都在 1000000 开外，确保你有足够的空间来设计排序）。

比如这样：

```text
 经济核算    jing'ji'he'suan

 经济合同    jing'ji'he'tong

 紧急会议    jin'ji'hui'yi

 经济合作    jing'ji'he'zuo

 经济成分    jing'ji'cheng'fen

 拒绝承认    ju'jue'cheng'ren

 经济结构    jing'ji'jie'gou

 经济价值    jing'ji'jia'zhi 0

 经济加值    jing'ji'jia'zhi 100
```

## 优先级

扩展词库在键盘中的全局优先级仅高于内置大词库。整句输入不查询扩展词库，但单个词汇命中会优先扩展词库，然后才会是内置词库，如果遇到完全相同的重复候选，则会按照前文所述的优先级进行去重。

另：如果你是码表用户且关闭了词库，那么扩展词库即使打开也不会被查询。

## 总结

扩展词库并不是导入的越多就越好，一个小而精的扩展词库能够很好的起到内置词库修正作用。但大而全的扩展词库则很大程度上与内置词库内容重叠，甚至会起到严重的反效果（比如降低键盘效率且降低了候选的准确度）。

## 对数云支持

在下个版本的落格输入法 X 更新中，我们会将扩展词库的分享和下载功能引入对数云，届时大家可以上传分享并维护自己的扩展词库，也可以下载其他用户分享和维护的扩展词库。

